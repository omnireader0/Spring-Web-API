1. # Spring-Web-API

   ## week1. 스프링 개발 환경 구축

   ### [Report]

   #### v1. 과정 6에서 에러 발생

   상황 : 매우 순조롭게 진행하다가 6번 과정에서 고초를 겪음
   
   이유
   
   - JDK를 비롯한 환경 스펙과 패키지 네이밍이 매뉴얼과 다르게 설정했고, 
   버전의 차이, 코드의 오타 등으로 에러가 반복하여 발생
   - 미루다가 당일치기로 해결하려 했으나, 스프링 설정이 꼬여버렸음
   
예정 
   
-  03/10까지 버전을 맞춰서 다시 환경을 구축할 예정
   -  JDK와 JRE, 톰캣, 6번 코드를 꼼꼼히 학습할 예정

   #### v2. 

   

   ### [Review & Study]

   #### 스프링 환경 구축과 스프링 부트 환경 구축 비교
   
   스프링 부트와 다른 스프링 환경 구축은
   
- 톰캣을 별도로 설치해 줘야 함
   - 외부 라이브러리를 수동으로 설치
- 버전 안 맞게 설치하면 난리남 
   - 스프링부트 없는 세대에서 개발했다면 난 벌써 포기각.
   
   #### JVM, JRE, JDK

   JVM
   - 자바 가상 머신, 운영체제 독립적으로 동작하기 위해 필요
   - 바이트 코드 실행해주는 가상머신

   JRE 
   - 자바 구동 환경
   - JVM + 라이브러리 : 자바 프로그램 실행하기 위해 필요

   JDK
- 자바 개발 키트
   - JRE + 컴파일러, 디버거 등 : 자바 사용에 필요한 모든 것들이 갖춰짐

   ## week2. API Interface Guide 문서 작성

   ### [Report] 

   

   ### [Review & Study]

   ### 1. REST API?
   
#### REST
   
웹의 장점을 최대한 활용할 수 있는 아키텍처로,
   **자원의 이름**으로 구분하여 해당 **자원의 상태를 주고 받는** 모든 것

   #### REST 구성 요소

   `자원, 조작, 표현`
   
   1. 자원?
   
- 서버에 있는 것
   - DB안에 들어가 있는 데이터 하나 하나를 의미한다. EX) 유저, 주문 등
   - 또는 이미지 하나하나를 의미, number_24, number_25
- URI를 통해 자원을 명시하고, 구분할 수 있다.
   
   1. 조작?
- 클라이언트는 HTTP Method(GET, POST, DELETE, PUT )를 이용하여 자원 조작 요청
   
1. 표현?
   - 클라이언트가 서버에게 요청하면 서버는 응답

   > REST는 **클라이언트와 서버 사이**에서 **HTTP URL**을 통해 자원을 명시하고, **HTTP Method**를 통해 자원에 대한 **조작을 요청**하고, 이에 대한 **응답**을 받는 것을 의미한다.

   #### REST의 기본 원칙 6가지

   > 6가지를 지켜야 RESTful 하다고 표현
   
1. 클라이언트 - 서버 모델
   
- 서버와 클라이언트 역할이 분리되어 독립적으로 개발
   - 클라이언트는 사용자 인증, 컨텍스트(세션, 로그인 정보)등을 직접 관리하는 구조, 서버는 AP 제공
   
2. 무상태
   
- 세션 상태가 서버에 저장되어 있지 않은 상태, 필요에 따라 외부 DB에 저장한다.
   - 서버는 요청에 대한 응답만 하며, 세션 관리는 클라이너트에게 책임이 있다.
   
   3. 캐시 가능
   
   - REST는 웹 표준인 HTTP를 그대로 사용하기 때문에, 웹에서 사용하는 기존 인프라를 그대로 사용할 수 있다. 따라서 HTTP가 가진 캐싱 기능 적용 가능하다.
     - 캐싱처리는 주로 GET 요청에서 처리된다.
     - 관련 헤더들
       - IF-MATCH
         - 클라이언트가 보낸 Etag 식별자와 같은 값이 있으면 200
         - 다른 값이 있으면 412 http code 로 응답, 덮어쓰기 용도로 사용된다.
       - If-Modified-Since
         - Last-Modified 의 값을 표기하여 전달해주고, 동일한 컨텐츠라면 ( 최종 수정 시간이 같다면 ) 304 http code 로 응답
         - 만약 다른 컨텐츠라면 (If-Modified-Since 에 들어간 last-modified 값보다 이후에 데이터가 수정되었다면) 200 으로 응답
    - If-**None**-match : ETag 식별자와 같은 값이라면 304를 전달하고, **다른 값**이라면 200을 응답한다. 신규 값을 생성하고, 덮어쓰기를 금지하는 용도로 사용된다.
     - 캐싱 관련 검증 헤더
    - ETag
       - last-modified

   4. 자체 표현 구조

   - REST API 만 보고도 이해할 수 있다.
   
   5. 계층화 구조

   - 클라이언트 입장에서는 REST API 서버만 호출한다.
- 하지만 REST 서버는 다른 계층으로 구성될 수 있으며, 로드 밸런싱, 암호화 계층을 추가해 구조상의 유연성을 둘 수 있고 PROXY, 게이트웨이 같은 네트워크 기반의 중간매체를 사용할 수 있음
   - 내부 레이어를 숨기고, 인접한 레이어에만 공개함으로써 레이어간의 결합을 줄인다

   6. 유니폼 인터페이스

   - HTTP 표준만 따른다면, 어떤 언어나 플랫폼에서도 사용이 가능한 인터페이스

   #### REST API 디자인 가이드

   1. URI의 리소스명은 소문자를 사용하고, 동사보다는 명사를 사용

      `GET    /members/delete/1`

      delete 같은 행위를 나타내는 표현은 지양, 단순 명사보다는 복수 명사 사용

   2. 자원에 대한 행위는 HTTP 메서드를 통해서 표현

      `DELETE  /members/1`

   3. 하이픈(-) 은 가독성 위해 사용, 밑줄(_)은 사용하지 않음
   
   4. 슬래시 구분자(/)는 계층 관계를 나타낼 때 사용,  URI의 마지막 문자로 사용하면 안됨
   
   ```
      GET    /members/1/ (X)
   GET    /members/1  (O)
      ```

   5. 파일 확장자는 URI에 포함시키지 않는다.

   ##### 리소스 간 관계 표현 방법
   
1. 소유의 관계 표현
   
      /리소스명/리소스ID/관계가 있는 다른 리소스명
   `GET     /users/{userId}/devices ( 유저가 가지고 있는 디바이스 목록 )`
   
2. 구체적인 표현 필요
      `GET    /users/{userId}/likes/devices ( 유저가 좋아하는 디바이스 목록 )`

   #### REST API 장단점

   REST API : REST를 지킨 API
   
   장점

   - HTTP 사용하므로 별도 인프라 구축 필요 없음
- HTTP 사용하는 모든 플랫폼에서 사용 가능
   - MSA에 적합

   단점

   - 명확한 표준이 없어 사람마다 다르게 해석, 사용

   

   ### 2. HTTP 통신

   #### HTTP 특징과 단점

   HTTP : ***\*Hypertext Transfer Protocol\****

   인터넷에서 데이터 주고 받을 수 있는 프로토콜
   
   특징

   1. 클라이언트 - 서버 구조
2. 비연결성 : 클라이언트와 서버의 연결을 유지하지 않는다.
   3. 무상태성 : 서버가 클라이언트의 상태를 보존하지 않는다.
   
   비연결성과 무상태성 특징으로 요청이 많아지면 스케일 아웃이 가능해진다.
   
   단점
보안에 취약하다. 도청, 위장, 변조가 가능하다.
   평문 텍스트를 전달하기 때문에 도청이 가능하다.
통신 상대를 확인하지 않기 때문에 위장 가능하다.
   완전하지 않기 때문에 변조 가능하다.
   
   #### HTTP 메서드 종류와 특징
   
   - GET: 리소스 조회
- POST: 요청 데이터 처리, 주로 등록에 사용
   - PUT: 리소스를 대체, 해당 리소스가 없으면 생성
   - PATCH: 리소스 부분 변경
   - DELETE: 리소스 삭제
   
   특징
안전, 멱등, 캐시 가능 등이 있다.
   안전은 호출해도 리소스가 변경하지 않는 것을 말한다.
   멱등은 여러 번의 호출에도 동일한 응답을 제공하는 것을 말한다.
   캐시 가능은 GET의 경우 캐시 기능이 있고, 응답 결과 리소스를 캐시해서 사용할 수 있다.
   
   - 멱등 메서드
     - GET : O
  - PUT : O
     - DELETE : O
  - POST : 멱등이 아니다. 두 번 호출해도 같은 결제가 중복해서 발생 가능
   - 멱등의 활용 : 서버가 타임아웃 등으로 정상 응답을 못 주었을 때, 클라가 같은 요청을 해도 되는지 판단 근거

   #### HTTP 상태 코드
   
200 : 요청 성공
   
- `200 OK`  ****: 클라이언트의 요청을 정상적으로 수행
   - `201 Created` : POST 를 통한 리소스 생성 작업 시, 해당 리소스가 성공적으로 생성됨을 알려줌

   300 : 리다이렉션 오류

   - `3XX` : 요청한 리소스에 대한 URI 가 변경되었을 때 사용하는 응답 코드
   
   400 : 클라이언트 오류
   
   - `400 BadRequest` : 요청이 부적절한 경우 사용
- `401 Unauthorized` : 클라이언트가 해당 요청에 대한 인증 필요(인가되지 않은 요청)
   - `403 Forbidden` : 서버가 요청은 이해했지만 승인 거부
- `404 Not Found` : 요청 리소스 찾을 수 없음
   - `405` : 요청 리소스에 대해 사용 불가능한 method 를 이용했을 때 사용하는 응답

   500 : 서버 오류

   - `500 Internal Server Error` : 서버에 문제가 있을 경우 사용하는 응답 코드

   

   ### 3. 브라우저 URL을 입력 후, 요청하여 서버에서 응답하는 과정
   
   - 설명 1
   
   1. 사용자(클라이언트)가 브라우저에 url을 입력하면
   2. DNS서버가 URL에 매핑되는 IP주소를 찾는다.
3. IP주소는 HTTP프로토콜을 이용하여 HTTP 요청 메시지를 보내고
   4. HTTP 요청 메시지는 TCP프로토콜을 사용하여 인터넷을통해 해당IP주소의 서버로 전송된다.
5. 서버는 클라이언트의 요청(HTTP 요청 메시지)를 승인하고, HTTP 응답 메시지를 보낸다.
   6. HTTP 응답 메시지는 HTTP 프로토콜을 통해 데이터로 변환되어, 브라우저에서 보여진다.

   ![https://user-images.githubusercontent.com/38436013/118634984-12d60180-b80e-11eb-8caa-ce4ed47628a2.png](https://user-images.githubusercontent.com/38436013/118634984-12d60180-b80e-11eb-8caa-ce4ed47628a2.png)
   
   - 설명 2 : osi 7 layer로 연관
   
   1. (응용 계층[L7]) 브라우저에 URL 입력
   2. (응용 계층 -> 네트워크 계층[L3] : DNS 프로토콜) url을 입력받으면, dns서버에 요청하여 ip주소로 변환
   3. (네트워크 계층 : 라우터 이용) 클라의 IP주소를 서버로 요청을 보내야함, 이때 라우터가 경로 설정을 해줌(IP주소가 어떻게 서버로 도달가능한가를 결정)
   4. (데이터링크(MAC) 계층[L2] : ARP 프로토콜) IP 주소를 MAC주소로 변환(클라가 IP던지면 그 IP갖는 서버가 MAC주소로 응답해주는 것을 말함)
   5. (전송 계층[L4] : TCP 프로토콜) 3-WAY-HANDSHAKING을 이용해 서버와 클라이언트 연결됨, 이말은 응답 메시지를 서버가 클라한테 줄 수 있는 조건이 됨
   6. (응용 계층 : HTTP 프로토콜) 연결되었으니 URL페이지에 대한 데이터 달라고 서버한테 요청, 서버는 응답, 브라우저에서 보여짐